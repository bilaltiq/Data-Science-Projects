#| label: load-packages
#| warning: false
#| message: false
library(tidyverse)
library(kableExtra)
library(unvotes)
library(lubridate)
library(DT)
library(plotly)
# set black & white default plot theme
theme_set(theme_classic())
# improve digit and NA display
options(scipen = 1, knitr.kable.NA = '')
#| label: load-packages
#| warning: false
#| message: false
library(tidyverse)
library(kableExtra)
library(unvotes)
library(lubridate)
library(DT)
library(plotly)
# set black & white default plot theme
theme_set(theme_classic())
# improve digit and NA display
options(scipen = 1, knitr.kable.NA = '')
#| label: view-un_votes
# head shows the first 6 observations by default
# what does including the 4 do?
head(un_votes, 4)
#| label: view-un_votes
# head shows the first 6 observations by default
# what does including the 4 do?
head(un_votes, 5)
#| label: view-un_votes
# head shows the first 6 observations by default
# what does including the 4 do?
head(un_votes, 4)
#| label: view-un_roll_calls
head(un_roll_calls, 4)
#| label: view-un_roll_call_issues
head(un_roll_call_issues, 4)
#| label: prep-data
# ready data for plotting
unvotes_hr <- un_votes %>%
inner_join(un_roll_calls, by = "rcid") %>%
inner_join(un_roll_call_issues, by = "rcid") %>%
filter(issue == "Human rights",
country %in% c("Pakistan",
"Iceland",
"Fiji")) %>%
group_by(country, year = year(date), issue) %>%
summarize(votes = n(),
percent_yes = mean(vote == "yes")) %>%
filter(votes > 5)
.groups
#| label: prep-data
# ready data for plotting
unvotes_hr <- un_votes %>%
inner_join(un_roll_calls, by = "rcid") %>%
inner_join(un_roll_call_issues, by = "rcid") %>%
filter(issue == "Human rights",
country %in% c("Pakistan",
"Iceland",
"Fiji")) %>%
group_by(country, year = year(date), issue) %>%
summarize(votes = n(),
percent_yes = mean(vote == "yes")) %>%
filter(votes > 5)
#| label: load-packages
#| warning: false
#| message: false
library(tidyverse)
library(kableExtra)
library(unvotes)
library(lubridate)
library(DT)
library(plotly)
# set black & white default plot theme
theme_set(theme_classic())
# improve digit and NA display
options(scipen = 1, knitr.kable.NA = '')
#| label: view-un_votes
# head shows the first 6 observations by default
# what does including the 4 do?
head(un_votes, 4)
#| label: view-un_roll_calls
head(un_roll_calls, 4)
#| label: view-un_roll_call_issues
head(un_roll_call_issues, 4)
#| label: prep-data
# ready data for plotting
unvotes_hr <- un_votes %>%
inner_join(un_roll_calls, by = "rcid") %>%
inner_join(un_roll_call_issues, by = "rcid") %>%
filter(issue == "Human rights",
country %in% c("Pakistan",
"Iceland",
"Fiji")) %>%
group_by(country, year = year(date), issue) %>%
summarize(votes = n(),
percent_yes = mean(vote == "yes")) %>%
filter(votes > 5)
#| label: load-packages
#| warning: false
#| message: false
library(tidyverse)
library(kableExtra)
library(unvotes)
library(lubridate)
library(DT)
library(plotly)
# set black & white default plot theme
theme_set(theme_classic())
# improve digit and NA display
options(scipen = 1, knitr.kable.NA = '')
#| label: view-un_votes
# head shows the first 6 observations by default
# what does including the 4 do?
head(un_votes, 4)
#| label: view-un_roll_calls
head(un_roll_calls, 4)
#| label: view-un_roll_call_issues
head(un_roll_call_issues, 4)
#| label: prep-data
# ready data for plotting
unvotes_hr <- un_votes %>%
inner_join(un_roll_calls, by = "rcid") %>%
inner_join(un_roll_call_issues, by = "rcid") %>%
filter(issue == "Human rights",
country %in% c("Pakistan",
"Iceland",
"Fiji")) %>%
group_by(country, year = year(date), issue) %>%
summarize(votes = n(),
percent_yes = mean(vote == "yes")) %>%
filter(votes > 5)
#| label: original-plot
#| fig-width: 6.5
#| fig-height: 3
# plot the data
ggplot(data = unvotes_hr, mapping = aes(x = year, y = percent_yes,
color = country)) +
geom_point() +
geom_smooth(method = "loess", se = FALSE) +
labs(title = "Percentage of 'Yes' votes  on human rights issues",
subtitle = "UN General Assembly, 1946 to 2019",
y = "% Yes",
x = "Year",
color = "Country")

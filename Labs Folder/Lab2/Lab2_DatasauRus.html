<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Bilal Tariq">
<meta name="dcterms.date" content="2024-01-31">

<title>Lab2_DatasauRus</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Lab2_DatasauRus_files/libs/clipboard/clipboard.min.js"></script>
<script src="Lab2_DatasauRus_files/libs/quarto-html/quarto.js"></script>
<script src="Lab2_DatasauRus_files/libs/quarto-html/popper.min.js"></script>
<script src="Lab2_DatasauRus_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Lab2_DatasauRus_files/libs/quarto-html/anchor.min.js"></script>
<link href="Lab2_DatasauRus_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Lab2_DatasauRus_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Lab2_DatasauRus_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Lab2_DatasauRus_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Lab2_DatasauRus_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab2_DatasauRus</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Bilal Tariq </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 31, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(datasauRus)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># set black &amp; white default plot theme</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_classic</span>()) </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># improve digit and NA display </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">1</span>, <span class="at">knitr.kable.NA =</span> <span class="st">''</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="lab-purpose" class="level1">
<h1>Lab Purpose</h1>
<p>This lab is a modified version of a lab developed by Mine Cetinkaya-Rundel. You’ll be working in random breakout groups to work through the lab.</p>
<p><em>Introduce yourselves to each other as you get started - preferred names, at least one academic interest, and at least one extracurricular activity.</em></p>
<p>The main goal of this lab is to introduce you to working with R and RStudio in conjunction with git and GitHub, all of which we will be using throughout the course. You will then submit the completed lab to Gradescope (the compiled .pdf of it) to make sure everyone is able to use Gradescope appropriately. Further directions are contained in the Practice0 assignment and you should check them out.</p>
<p>We will work primarily with two R packages: <code>datasauRus</code> which contains the datasets for the lab, and <code>tidyverse</code> which is a collection of packages for doing data analysis in a “tidy” way. Both packages are ready to be loaded in the <code>setup</code> code chunk. <code>tidyverse</code> loads <code>dplyr</code> which many of you may have seen used for data wrangling in other stats courses. It also loads <code>ggplot2</code> which is the package we’ll be using to make our visualizations (more next week).</p>
<section id="step-0-get-the-lab-.qmd-file-from-the-course-git-repo-by-pulling-the-repo.-copy-the-file-over-to-your-personal-repo-for-class." class="level2">
<h2 class="anchored" data-anchor-id="step-0-get-the-lab-.qmd-file-from-the-course-git-repo-by-pulling-the-repo.-copy-the-file-over-to-your-personal-repo-for-class.">Step 0: Get the lab .Qmd file from the course git repo by pulling the repo. Copy the file over to your personal repo for class.</h2>
<p>Assuming you have Prep0 completed (you should!), and you accepted your invite to the class GitHub organization, you should have access to the course git repo. Pulling updates your local copy of the repo, making sure you have the most recent copy of the lab that I’ve posted. Then, you can copy the file over to your repo to work on it. More detailed directions for how to do the copying are in the GitHub classroom guide. Once this is done, we are ready to get going.</p>
</section>
<section id="step-1-verify-you-are-working-on-the-lab-saved-in-your-repo-and-that-you-are-working-in-your-project-repo." class="level2">
<h2 class="anchored" data-anchor-id="step-1-verify-you-are-working-on-the-lab-saved-in-your-repo-and-that-you-are-working-in-your-project-repo.">Step 1: Verify you are working on the lab saved in <em>your</em> repo and that you are working in <em>your</em> project repo.</h2>
<p>Look in the top right of RStudio to verify the project name matches <em>your</em> repo. (If you decided to use the GitHub Desktop app, you won’t need this part; instead check in your file explorer that you’re working in the right place.)</p>
<p>Knit the Qmd/Rmd file (<code>Cmd + Shift + K</code> on Mac or <code>Ctrl + Shift + K</code> on PC or hit the <code>Knit</code> button in the toolbar above) and verify the pdf (or other relevant files) is created in <em>your</em> repo and not some other location.</p>
<p>(From here on, if you see Rmd, it’s because it could be Qmd or Rmd - it’s whatever file you’re coding in, etc.)</p>
</section>
<section id="step-2-enter-your-name-in-the-yaml-header-where-indicated." class="level2">
<h2 class="anchored" data-anchor-id="step-2-enter-your-name-in-the-yaml-header-where-indicated.">Step 2: Enter your name in the YAML header where indicated.</h2>
<p>“YAML” rhymes with “camel” and stands for “Yet Another Markup Language”. YAML headers are very sensitive - even a space or comma out of place can cause them to break. Be careful if you delete the parentheses there - they must be put back exactly.</p>
</section>
<section id="step-3-knit-view-diff-and-commit" class="level2">
<h2 class="anchored" data-anchor-id="step-3-knit-view-diff-and-commit">Step 3: Knit, view diff, and commit!</h2>
<p>Entering your name made a change to the file that we will be able to track with Git.</p>
<p>Knit the Rmd file, then go to your Github Desktop app (or the Git pane if you set it up in RStudio).</p>
<p>Click on the document in the app to see the changes you made. You can uncheck the .pdf at the same time - we only want the .Qmd/.Rmd at the moment.</p>
<p>If you’re happy with the changes, write “Update author name” in the <strong>Commit message</strong> box, and hit <strong>Commit</strong>. The box is in the lower left corner of the app.</p>
<p>This saves your changes locally including the message. The changes haven’t been sent back to GitHub yet though.</p>
<p><em>How often should you commit??</em> You do not have to commit after every change; this would get quite cumbersome. You should consider committing states that are <em>meaningful to you</em> for inspection, comparison, or restoration. For example, perhaps you commit after you’ve completed part of a problem, or after you got a graphic working, or a really complicated wrangling command down.</p>
</section>
<section id="step-4-push-your-changes" class="level2">
<h2 class="anchored" data-anchor-id="step-4-push-your-changes">Step 4: Push your changes</h2>
<p>After committing, go ahead and <strong>Push</strong> your commit(s) back onto GitHub using the buttons. In the app, after you’ve made a commit, the Fetch/Pull option turns into a Push option. Click that to push.</p>
<p>You can think of commits as snapshots of your work over time, and pushing will sync your work with GitHub so you (or a collaborator) can pick up where you left off but on another device. You don’t have to push after every commit, but should push before you stop working on anything. You want your changes to be available to the next person working (your future self or your collaborators).</p>
</section>
<section id="step-5-edit-commit-and-push-until-done" class="level2">
<h2 class="anchored" data-anchor-id="step-5-edit-commit-and-push-until-done">Step 5: Edit, Commit, and Push until done!</h2>
<p>Work through the rest of the lab. When you are done with the assignment, save the pdf as “<em>YourFirstInitialYourLastName</em>_<em>thisfilename</em>.pdf” before committing and pushing (this is generally good practice but also helps me in those times where I need to download all student homework files). For example, I would save this as AWagaman_Lab2.pdf. At times it is also useful to add the date at the end. Final pdfs should be relabeled this way to set them apart as your final submission.</p>
<p>You MUST push a final version of each lab .Qmd.Rmd and .pdf to your repo for our course assignments. This counts as part of your participation in class, and for this assignment, part of Practice0 is making sure I can find these in your repo. Note that you don’t have to push the .pdf until you’ve finalized it, but it doesn’t hurt to do it earlier either (assuming you keep the repo organized, anyway). Just be sure you get the rename in on the final version so that’s clear.</p>
</section>
<section id="gradescope-upload" class="level2">
<h2 class="anchored" data-anchor-id="gradescope-upload">Gradescope Upload</h2>
<p>Our Practice0 assignment is designed to ensure you’ve successfully submitted an assignment to Gradescope before the first real assignment is due. No feedback will be provided on this assignment. Here’s how that will work when you are finished with the lab and have your final .pdf.</p>
<p>For each question/part, allocate all pages associated with the specific question/part. Do your best with this. If your work for a question runs onto a page that you did not select, you may not get credit for the work. If you do n?ot allocate <em>any</em> pages when you upload your pdf, you may get a zero for the assignment.</p>
<p>You can resubmit your work as many times as you want before the deadline, so you should absolutely not wait until the last minute to submit some version of your work. You should be compiling as you go, reducing the chance of last minute compiling issues. Your git repo will show when you’ve made commits, too. For this activity, I’ve provided the commit messages so they should show. If you do run into an issue, submit whatever you have completed to receive partial credit.</p>
</section>
<section id="come-together---make-sure-everyone-is-ready-before-moving-on" class="level2">
<h2 class="anchored" data-anchor-id="come-together---make-sure-everyone-is-ready-before-moving-on">Come together - Make sure everyone is ready before moving on</h2>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="working-with-some-data-and-practicing-workflow" class="level1">
<h1>Working with some data and practicing workflow</h1>
<p>The data we will be working with is called <em>datasaurus_dozen</em> and it’s in the <code>datasauRus</code> package.</p>
<p>When loaded, this data appears to be a single dataset. However, this single dataset contains 13 datasets, designed to show us why data visualisation is important and how summary statistics alone can be misleading. The different datasets are identified by the <code>dataset</code> variable.</p>
<p>To find out more about the dataset, type the following in your Console: <code>?datasaurus_dozen</code>. A question mark before the name of an object will always bring up its help file. This command can be run in the Console or a code chunk, but remove it or comment it out from the code chunk before you compile.</p>
<!-- PROBLEM 1 ---------------------------------------------------------------->
</section>
<section id="understanding-the-data" class="level1">
<h1>1 - Understanding the data</h1>
<p>It is tempting to jump into visualization and analysis (like we did a little on the first day), but it is critical as a statistician that we first understand the context and structure of the data.</p>
<blockquote class="blockquote">
<p>part a - Based on the help file, how many rows and how many columns are in the data frame?</p>
</blockquote>
<p>Solution: There are 1846 rows with 3 columns.</p>
<blockquote class="blockquote">
<p>part b - Based on the help file, what variables are included in the data frame?</p>
</blockquote>
<p>Solution: There are 3 variables: the dataset, x and y values.</p>
<p>Markdown allows you to do a lot in terms of formatting that you may not have seen before. For example, you can enter bulleted lists by using the following pattern:</p>
<ul>
<li>first item</li>
<li>second item</li>
<li>third item</li>
</ul>
<p>For more on Markdown formatting, you can check out the RMarkdown formatting <code>cheatsheet</code> in our Resources folder or find out more <a href="https://www.rstudio.com/resources/cheatsheets/">here</a> online. You’ll see lots of cheatsheets available for reference.</p>
<blockquote class="blockquote">
<p>part c - Use Markdown formatting to provide a bulleted list of the variables.</p>
</blockquote>
<p>Solution:</p>
<ul>
<li>dataset</li>
<li>x</li>
<li>y</li>
</ul>
<!--
Check that when you knit you get what you expect. Extra space, or lack thereof, can change the formatting. The formatting used here means this text is a comment you see in the .Qmd/.Rmd but not in the .pdf. 
-->
<blockquote class="blockquote">
<p>part d - How many observations are in each dataset within this larger data frame? Let’s make a <em>frequency table</em> of the of the <code>dataset</code> variable to find out.</p>
</blockquote>
<p>Note: The <code>kable()</code> function (from <code>knitr</code> package, with more functionality available from the <code>kableExtra</code> package) makes nicer looking tables when you knit. For quick “professional quality” pdf tables, add the argument <code>booktabs = TRUE</code>.</p>
<p>Try knitting the document without piping the frequency table to <code>kable()</code>, with the pipe to <code>kable()</code>, and finally with the pipe to <code>kable(booktabs = TRUE)</code> to see the differences.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>datasaurus_dozen <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dataset) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">dataset</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">away</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="even">
<td style="text-align: left;">bullseye</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="odd">
<td style="text-align: left;">circle</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="even">
<td style="text-align: left;">dino</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dots</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="even">
<td style="text-align: left;">h_lines</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="odd">
<td style="text-align: left;">high_lines</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="even">
<td style="text-align: left;">slant_down</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="odd">
<td style="text-align: left;">slant_up</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="even">
<td style="text-align: left;">star</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="odd">
<td style="text-align: left;">v_lines</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="even">
<td style="text-align: left;">wide_lines</td>
<td style="text-align: right;">142</td>
</tr>
<tr class="odd">
<td style="text-align: left;">x_shape</td>
<td style="text-align: right;">142</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Note: By default, the table is left-justified. You can pipe to an additional function called <code>kable_styling()</code> which allows further customization of pdf tables. By default, this function will center the table. It may also do a weird LaTeX thing where the table ends up somewhere else in the document other than where you want it. To prevent that from happening, we can add the argument <code>latex_options = "hold_position"</code> (or <code>"HOLD_position"</code> if you’re <em>really</em> serious).</p>
<p>LaTeX is responsible for setting up our document formatting. Kniting/compiling actually creates a .tex document first that is converted into a .pdf. Learning some LaTeX can be very useful for trying to deal with issues as well as getting equations and symbols in the document in the format you want.</p>
<p>Solution: (How many observations are in each data set? Write a sentence!)</p>
<p>There are 142 observations for each of the datasets!</p>
<!-- 
TIME TO COMMIT! After you've added your responses to the parts above for the first problem, knit to make sure things are still working and the pdf looks the way you want, and commit your changes to the Rmd file with the commit message "Add answers to problem 1"
-->
<div style="page-break-after: always;"></div>
<!-- PROBLEM 2 ---------------------------------------------------------------->
</section>
<section id="data-visualization-and-summary" class="level1">
<h1>2 - Data visualization and summary</h1>
<blockquote class="blockquote">
<p>part a - A correlation</p>
</blockquote>
<p>Calculate the correlation coefficient, <span class="math inline">\(r\)</span>, between <code>x</code> and <code>y</code> for the <code>dino</code> dataset. Below is the code you will need to complete this exercise. Basically, the answer is already given, but you need to include relevant bits in your Rmd document and successfully knit it and view the results.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start with `datasaurus_dozen`</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for observations where `dataset == "dino"`</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Store the resulting filtered data frame as a new data frame called `dino_data`</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>dino_data <span class="ot">&lt;-</span> datasaurus_dozen <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dataset <span class="sc">==</span> <span class="st">"dino"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute correlation between `x` and `y` for `dino` dataset with label `r`</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>dino_data <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">r =</span> <span class="fu">cor</span>(x, y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
        r
    &lt;dbl&gt;
1 -0.0645</code></pre>
</div>
</div>
<p>What does this correlation coefficient tell us about the relationship between <code>x</code> and <code>y</code> in the <code>dino</code> dataset?</p>
<p>Solution: There’s a weak negative association between x and y.</p>
<blockquote class="blockquote">
<p>part b - A plot</p>
</blockquote>
<p>Oops. In intro stats, we learned correlation is an appropriate measure to use to assess linear relationships. But we didn’t plot the relationship here to check it out first. Let’s do that.</p>
<p>We want to plot <code>y</code> vs.&nbsp;<code>x</code> for the <code>dino</code> dataset using the <code>ggplot()</code> function. Its first argument is the data you’re visualizing. Next we define the <code>aes</code>thetic mappings. In other words, the columns of the data that get mapped to certain aesthetic features of the plot, e.g.&nbsp;the <span class="math inline">\(x\)</span> axis will represent the variable called <code>x</code> and the <span class="math inline">\(y\)</span> axis will represent the variable called <code>y</code>. Then, we add another layer to this plot where we define which <code>geom</code>etric shapes we want to use to represent each observation in the data. In this case we want these to be points, hence <code>geom_point</code>.</p>
<p>You will learn about the philosophy of building data visualizations in detail next week. For now, follow along with the code that is provided.</p>
<!-- change `eval: false' to  `eval: true` to make sure the plot is displayed in the knitted pdf -->
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dino_data, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Lab2_DatasauRus_files/figure-html/dino-plot-1.png" class="img-fluid" width="240"></p>
</div>
</div>
<p>What do you notice now about the relationship between x and y? Is using correlation as a summary measure appropriate?</p>
<p>Solution: No, correlation as a summary measure isn’t appropriate in this case. There is little correlation yet the data still reveals a pattern that is only visualised in the plot.</p>
<!-- 
TIME TO KNIT & COMMIT: "Add answers to first parts of problem 2"
-->
<blockquote class="blockquote">
<p>part c - Another correlation</p>
</blockquote>
<p>Now calculate the correlation coefficient between <code>x</code> and <code>y</code> for the <code>star</code> dataset. You can (and should) reuse code we introduced above, after pasting it below, just replace the dataset name with the desired dataset. How does this value compare to the correlation coefficient from the <code>dino</code> dataset?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start with `datasaurus_dozen`</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for observations where `dataset == "star"`</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Store the resulting filtered data frame as a new data frame called `star_data`</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>star_data <span class="ot">&lt;-</span> datasaurus_dozen <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dataset <span class="sc">==</span> <span class="st">"star"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute correlation between `x` and `y` for `dino` dataset with label `r`</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>star_data <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">r =</span> <span class="fu">cor</span>(x, y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
        r
    &lt;dbl&gt;
1 -0.0630</code></pre>
</div>
</div>
<p>Solution: This is another weak correlation between the x and y values just like the dino dataset.</p>
<blockquote class="blockquote">
<p>part d - Another plot</p>
</blockquote>
<p>Plot <code>y</code> versus <code>x</code> for the <code>star</code> dataset. Does the plot look the same as the plot of the <code>dino</code> data? Is correlation an appropriate summary measure?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> star_data, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Lab2_DatasauRus_files/figure-html/star-plot-1.png" class="img-fluid" width="240"></p>
</div>
</div>
<p>Solution: Again, correlation isn’t an appropriate summary measure because there are patterns in the data that are seen on the plot.</p>
<!-- 
TIME TO KNIT & COMMIT: "Add answers to middle parts of problem 2"
-->
<blockquote class="blockquote">
<p>part e - A final correlation</p>
</blockquote>
<p>Now calculate the correlation coefficient between <code>x</code> and <code>y</code> for the <code>circle</code> dataset. You can (and should) reuse code we introduced above, after pasting it below, just replace the dataset name with the desired dataset. How does this value compare to the correlation coefficients from the other two datasets?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start with `datasaurus_dozen`</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for observations where `dataset == "circle"`</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Store the resulting filtered data frame as a new data frame called `circle_data`</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>circle_data <span class="ot">&lt;-</span> datasaurus_dozen <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(dataset <span class="sc">==</span> <span class="st">"circle"</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute correlation between `x` and `y` for `dino` dataset with label `r`</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>circle_data <span class="sc">%&gt;%</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">r =</span> <span class="fu">cor</span>(x, y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
        r
    &lt;dbl&gt;
1 -0.0683</code></pre>
</div>
</div>
<p>Solution: This value is similar to the previous two datasets with a weak negative correlaton.</p>
<blockquote class="blockquote">
<p>part f - A final plot</p>
</blockquote>
<p>Plot <code>y</code> versus <code>x</code> for the <code>circle</code> dataset. Does the plot look the same as either plot from the other two datasets?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> circle_data, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Lab2_DatasauRus_files/figure-html/circle-plot-1.png" class="img-fluid" width="240"></p>
</div>
</div>
<p>Solution: The plot does not look the same, it is very distinct and dissimilar from the previous two plots.</p>
<!-- 
TIME TO KNIT & COMMIT: "Add answers to final parts of problem 2"
-->
<div style="page-break-after: always;"></div>
<!-- PROBLEM 3 ---------------------------------------------------------------->
</section>
<section id="making-things-more-efficient" class="level1">
<h1>3 - Making things more efficient</h1>
<p>The previous problem had a lot of repetition. To make things more efficient, we can plot all the datasets at once using <em>facets</em>, and we can compute all the correlations at once using the <code>group_by()</code> function. The code is provided below.</p>
<blockquote class="blockquote">
<p>part a - Make the figure and get the values.</p>
</blockquote>
<p>Solution: -0.064, -0.069, -0.068, -0.064, -0.060 and so on…</p>
<!-- set `eval: true` and adjust the figure dimensions so things don't look smushed in the pdf -->
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatterplots by dataset</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datasaurus_dozen, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">color =</span> dataset))<span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> dataset, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Lab2_DatasauRus_files/figure-html/plot-cors-1.png" class="img-fluid" width="384"></p>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlations by dataset</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>datasaurus_dozen <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dataset) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">r =</span> <span class="fu">cor</span>(x, y)) <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs =</span> <span class="cn">TRUE</span>, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">dataset</th>
<th style="text-align: right;">r</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">away</td>
<td style="text-align: right;">-0.064</td>
</tr>
<tr class="even">
<td style="text-align: left;">bullseye</td>
<td style="text-align: right;">-0.069</td>
</tr>
<tr class="odd">
<td style="text-align: left;">circle</td>
<td style="text-align: right;">-0.068</td>
</tr>
<tr class="even">
<td style="text-align: left;">dino</td>
<td style="text-align: right;">-0.064</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dots</td>
<td style="text-align: right;">-0.060</td>
</tr>
<tr class="even">
<td style="text-align: left;">h_lines</td>
<td style="text-align: right;">-0.062</td>
</tr>
<tr class="odd">
<td style="text-align: left;">high_lines</td>
<td style="text-align: right;">-0.069</td>
</tr>
<tr class="even">
<td style="text-align: left;">slant_down</td>
<td style="text-align: right;">-0.069</td>
</tr>
<tr class="odd">
<td style="text-align: left;">slant_up</td>
<td style="text-align: right;">-0.069</td>
</tr>
<tr class="even">
<td style="text-align: left;">star</td>
<td style="text-align: right;">-0.063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">v_lines</td>
<td style="text-align: right;">-0.069</td>
</tr>
<tr class="even">
<td style="text-align: left;">wide_lines</td>
<td style="text-align: right;">-0.067</td>
</tr>
<tr class="odd">
<td style="text-align: left;">x_shape</td>
<td style="text-align: right;">-0.066</td>
</tr>
</tbody>
</table>
</div>
</div>
<blockquote class="blockquote">
<p>part b - What do you notice? Is the correlation coefficient an appropriate summary for any of these datasets? Why or why not?</p>
</blockquote>
<p>Solution: I noticed that ALL of these datasets have a very similar correlation coefficient. Yet, we can see that all of these datasets are incredibly distinct and can represent different things when plotted visually. Thus, the correlation coefficient is not an appropriate summary for any of these datasets.</p>
<blockquote class="blockquote">
<p>part c - What do you think <code>ncol = 3</code> does in the code above? What about <code>digits = 3</code>?</p>
</blockquote>
<p>Solution: ncol represents the number of columns that we’re using and the digits = 3 part represents the number of significant figures.</p>
<!-- 
TIME TO KNIT & COMMIT: "Add answers to Problem 3"
-->
<div style="page-break-after: always;"></div>
<!-- PROBLEM 4 ---------------------------------------------------------------->
</section>
<section id="more-on-r" class="level1">
<h1>4 - More on R</h1>
<blockquote class="blockquote">
<p>part a - Code chunk options</p>
</blockquote>
<p>.Qmds/.Rmds allow for global options to be set for how code chunks work. At times, you might change those options for a particular chunk, such as when you adjusted fig.width and fig.height above. In .Qmds, these end up inside the chunk, while in .Rmds, these are in the {r} definition of the chunk.</p>
<p>Let’s explore how these options work when compared to the default settings. Add the following options (one at a time!) to the code chunk below and re-knit the PDF each time. Try to identify what each option is doing to the PDF output. The QMD and RMD versions are provided for you to see (note the differences in capitalization required), but this is a .Qmd, so use those.</p>
<ul>
<li><code>#| echo: false</code> OR Rmd version <code>echo = FALSE</code>:</li>
<li><code>#| eval: false</code> OR Rmd version <code>eval = FALSE</code>:</li>
<li><code>#| include: false</code> OR Rmd version <code>include = FALSE</code>:</li>
<li><code>#| collapse: true</code> OR Rmd version <code>collapse = TRUE</code>:</li>
</ul>
<p>After trying out the options, to complete this part, use appropriate options to output the correlations but not show any of the code used to get them.</p>
<p>Solution:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlations by dataset (plain R output)</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>datasaurus_dozen <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dataset) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">r =</span> <span class="fu">cor</span>(x, y) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">3</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 2
   dataset         r
   &lt;chr&gt;       &lt;dbl&gt;
 1 away       -0.064
 2 bullseye   -0.069
 3 circle     -0.068
 4 dino       -0.064
 5 dots       -0.06 
 6 h_lines    -0.062
 7 high_lines -0.069
 8 slant_down -0.069
 9 slant_up   -0.069
10 star       -0.063
11 v_lines    -0.069
12 wide_lines -0.067
13 x_shape    -0.066</code></pre>
</div>
</div>
<p>Note: There are a lot more R code chunk options, most of which we’ll not use in this course. But if you’re interested in the full list, check out the <a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">RMarkdown Reference Guide</a>.</p>
<blockquote class="blockquote">
<p>part b - Inline R code</p>
</blockquote>
<p>Here’s another fun functionality of RMarkdown: You can use inline R code chunks to place R numerical output in your text. For instance:</p>
<p>The dino dataset contains 142 observations and has 3 variables. The mean <span class="math inline">\(x\)</span> value is 54.2632732 units and the mean <span class="math inline">\(y\)</span> value is 47.8322528 units.</p>
<p>You can use the <code>round</code> command to get a sensible number of digits: The mean <span class="math inline">\(x\)</span> value is 54.3 units and the mean <span class="math inline">\(y\)</span> value is 47.8 units.</p>
<p>Use inline R coding to write a sentence about the standard deviation of <span class="math inline">\(x\)</span> in the dino dataset reported to 1 decimal place.</p>
<p>Solution:</p>
<blockquote class="blockquote">
<p>part c - Text versus code formatting</p>
</blockquote>
<p>Markdown will take text that is typed outside a code chunk and format it so that it doesn’t run off the page. It doesn’t do that within code chunks though. This can be problematic for both code and code comments. We’ll be learning a coding style that should help avoid issues with this, but if you have a lot of options, it can still be an issue. Let’s look at some code that needs adjusting to fix.</p>
<p>(If you don’t have a code margin line showing in your RStudio, look under Tools &gt; Global Options &gt; Code &gt; Display for <code>show margin</code> and set the margin column to 80. It’s closer to 88, but if you use 80, it will match the text margin.)</p>
<p>We will use the <code>iris</code> data set built into R for this example (it has more variables to play with). Look at the help menu for details on the data set.</p>
<p>If you knit to pdf without doing anything in the chunk below, both the comment and code will run off the page. (Knit and check that you can see this!) We want to fix this.</p>
<p>For comments, you can spread them on different lines manually by making a series of shorter messages (demo-ed above in problem 2) or simply by writing a more compact comment.</p>
<p>For code, the idea is to only allow for one pipe (the %&gt;% operator) or plus sign (for plots) per line, using indents to keep the overall line together (see examples above). This is the coding style we are using for class. It helps with code readability a ton! If you have a long variable list or something (not pipes or plus signs causing the issue), you’ll need to manually hit enter somewhere in the list that’s not over the line.</p>
<p>Fix the code chunk below so that neither the comment (which you can rewrite) nor the code goes off the edge of the page, following the coding style described and demonstrated above.</p>
<p>Solution:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># want to get the correlation between Sepal.Length and Sepal.Width for all three iris species in the data set</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(Species, Sepal.Length, Sepal.Width) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">correlation =</span> <span class="fu">cor</span>(Sepal.Length, Sepal.Width)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Species    correlation
  &lt;fct&gt;            &lt;dbl&gt;
1 setosa           0.743
2 versicolor       0.526
3 virginica        0.457</code></pre>
</div>
</div>
<!-- 
KNIT & COMMIT one last time: "Add answers to Problem 4". You can add the .pdf to this commit and do your final rename if you are finished. This is where you need to be for Practice0's upload to Gradescope.
-->
<!--
If you finish the lab in our class period, I strongly encourage you to look back over the lab with your group, identify packages, functions, and R functionality new to you and talk over their purpose/use. We'll learn lots of new functions from many packages and it is good practice to review as you go. R formatting is also very useful and you may want to check out the cheatsheets in the resources folder or via the link above. 
-->
<div style="page-break-after: always;"></div>
<p><strong>References</strong></p>
<p>The original Datasaurus (<code>dino</code>) was created by Alberto Cairo in <a href="http://www.thefunctionalart.com/2016/08/download-datasaurus-never-trust-summary.html">this great blog post</a>. The other Dozen were generated using simulated annealing and the process is described in the paper <em>Same Stats, Different Graphs: Generating Datasets with Varied Appearance and Identical Statistics through Simulated Annealing</em> by Justin Matejka and George Fitzmaurice. In the paper, the authors simulate a variety of datasets that the same summary statistics to the Datasaurus but have very different distributions.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>
---
title: "Data Wrangling COVID Analysis"
author: "Bilal Tariq"
date: "2024-04-24"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(mosaic)
library(Stat2Data)
library(leaps)
library(broom)
library(rvest)
library(methods)
library(shiny)
library(readxl)
library(tidyverse)

```



COVID Cases Dataset:

```{r pressure, echo = TRUE}

#Importing dataset of covid cases
casesCountryData <- read_csv("COVID Datasets/dailyCases.csv")

#Importing dataset of latitudes and longitudes of each country, and getting rid of country codes
latitudelongitudeData <- read_csv("COVID Datasets/latlong.csv") %>%
  select(Country, Latitude, Longitude)


#Selecting only the required columns from the cases dataset that we need for our leaflet map
casesCountryDataSelected <- casesCountryData %>%
  select(cases, deaths, countriesAndTerritories)
  
#Since the cases dataset is of daily cases per country in the year 2020, we are going to have to summarise the data and group by country
casesCountryDataSummarized <- casesCountryDataSelected %>%
  group_by(countriesAndTerritories) %>%
  summarise(
    Cases = sum(cases)
  )
#Renaming Countries and Territories to Countries for Simplicity
names(casesCountryDataSummarized)[names(casesCountryDataSummarized) == "countriesAndTerritories"] <- "Countries"

#Merging the datasets into one so we have a country with its designated latitude and longitude alongside their cases
casesCountryLatLong <- left_join(casesCountryDataSummarized, latitudelongitudeData, by = c("Countries" = "Country"))

#saveRDS to be read by shiny application
saveRDS(casesCountryLatLong, "CountryCases.rds")

head(casesCountryLatLong)


```
LDA Topic Analysis Dataset:
ss
```{r pressure, echo=TRUE, warning = FALSE}

topicAnalysisData <- read_excel("COVID Datasets/topicAnalysisData.xlsx")

topicAnalysisDataSelected <- topicAnalysisData %>%
  select(Reported_On, Title, Publication_Date, Primary_Country, Primary_Language) %>%
  filter(Primary_Language == "English")

# The reason why we're filtering the Primary language to be English is because there were entries which weren't in English, which would not make it suitable for LDA topic analysis.

#Saving as an RDS

saveRDS(topicAnalysisDataSelected, "LDATopicAnalysisData.rds")

```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
